---
description: ClickUp MCP Server ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ»è¨­è¨ˆåŸå‰‡
globs: ["src/**/*.ts"]
alwaysApply: true
---

# ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³

## ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: ClickUp MCP Server  
**ã‚¿ã‚¤ãƒ—**: Cloudflare Workers ãƒ™ãƒ¼ã‚¹ã® OAuth MCP Server  
**ç›®çš„**: OAuthèªè¨¼ã‚’é€šã˜ã¦ClickUp APIã¨é€£æºã™ã‚‹MCPï¼ˆModel Context Protocolï¼‰ãƒ„ãƒ¼ãƒ«ã‚’æä¾›

## ğŸ—ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **ãƒ©ãƒ³ã‚¿ã‚¤ãƒ **: Cloudflare Workers (Edge Runtime)
- **è¨€èª**: TypeScript (ES2021ã€strict mode)
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: HTTPå‡¦ç†ã«Hono
- **OAuth**: @cloudflare/workers-oauth-provider
- **MCP**: @modelcontextprotocol/sdk + agents/mcp
- **APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ**: å†…è”µã®ClickUp APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
- **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: Zodã‚¹ã‚­ãƒ¼ãƒ
- **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼**: pnpm

## ğŸ“‚ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
src/
â”œâ”€â”€ index.ts                    # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ config.ts                   # è¨­å®šå®šæ•°
â”œâ”€â”€ types.ts                    # TypeScriptå‹å®šç¾©
â”œâ”€â”€ utils.ts                    # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”œâ”€â”€ workers-oauth-utils.ts      # OAuthå°‚ç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”œâ”€â”€ auth/                       # èªè¨¼ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â””â”€â”€ user.ts                 # ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ãƒ­ã‚¸ãƒƒã‚¯
â”œâ”€â”€ handlers/                   # ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
â”‚   â”œâ”€â”€ combined-handler.ts     # ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯
â”‚   â”œâ”€â”€ oauth-handler.ts        # OAuthãƒ•ãƒ­ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
â”‚   â””â”€â”€ site-handler.ts         # ã‚µã‚¤ãƒˆã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
â”œâ”€â”€ tools/                      # MCPãƒ„ãƒ¼ãƒ«ã¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ auth.ts                 # èªè¨¼é–¢é€£ãƒ„ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ task.ts                 # ã‚¿ã‚¹ã‚¯æ“ä½œãƒ„ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ search.ts               # æ¤œç´¢æ©Ÿèƒ½ãƒ„ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ inbox.ts                # å—ä¿¡ç®±ç®¡ç†ãƒ„ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ index.ts                # ãƒ„ãƒ¼ãƒ«ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â””â”€â”€ common/                 # å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚       â””â”€â”€ error-handler.ts    # ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”œâ”€â”€ api/                        # APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…
â”‚   â”œâ”€â”€ index.ts                # çµ±åˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ basic.ts                # åŸºæœ¬ã‚¿ã‚¹ã‚¯æ“ä½œ
â”‚   â”œâ”€â”€ search.ts               # æ¤œç´¢æ©Ÿèƒ½
â”‚   â””â”€â”€ common/                 # å…±é€šæ©Ÿèƒ½
â”‚       â””â”€â”€ error-handler.ts    # ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
â””â”€â”€ utils/                      # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
    â””â”€â”€ formatters.ts           # ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒ†ã‚£ãƒ³ã‚°ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
```

## ğŸ”„ ç¾åœ¨ã®å®Ÿè£…æ§‹é€ 

### 1. MCPã‚µãƒ¼ãƒãƒ¼å®Ÿè£…
```typescript
export class MyMCP extends McpAgent<Env, Record<string, never>, UserProps> {
  server = new McpServer({
    name: "ClickUp MCP Server",
    version: "1.0.0",
    icon: "https://clickup.com/icon.ico",
  });

  async init() {
    // ä¾å­˜æ€§æ³¨å…¥ã®è¨­å®š
    const deps: ServiceDependencies = {
      env: this.env,
      config: createAppConfig(this.env),
    };
    
    const clickupClient = new ClickUpClient(deps);
    const getAccessToken = () => this.props.accessToken;
    
    // æ©Ÿèƒ½åˆ¥ãƒ„ãƒ¼ãƒ«ç™»éŒ²
    registerAuthTools(this.server, clickupClient, getAccessToken);
    registerTaskTools(this.server, clickupClient, getAccessToken);
    registerSearchTools(this.server, clickupClient, getAccessToken);
    registerInboxTools(this.server, clickupClient, getAccessToken);
  }
}
```

### 2. ä¾å­˜æ€§æ³¨å…¥ãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
export interface ServiceDependencies {
  env: Env;
  config: AppConfig;
}

export class ClickUpClient {
  private auth: ClickUpAuth;
  private taskBasic: ClickUpTaskBasic;
  private taskSearch: ClickUpTaskSearch;
  private formatters: DataFormatters;

  constructor(private deps: ServiceDependencies) {
    this.auth = new ClickUpAuth(deps);
    this.taskBasic = new ClickUpTaskBasic(deps);
    this.taskSearch = new ClickUpTaskSearch(deps);
    this.formatters = new DataFormatters(deps);
  }

  // å…¬é–‹ãƒ¡ã‚½ãƒƒãƒ‰
  async getUserInfo(accessToken: string) {
    return this.auth.getUserInfo(accessToken);
  }

  async getTask(accessToken: string, taskId: string) {
    const rawData = await this.taskBasic.getTask(accessToken, taskId);
    return this.formatters.formatTaskData(rawData);
  }
}
```

### 3. æ©Ÿèƒ½åˆ¥ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ†å‰²
- `src/api/` - API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…
- `src/tools/` - MCP ãƒ„ãƒ¼ãƒ«ç™»éŒ²é–¢æ•°
- `src/handlers/` - HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
- `src/auth/` - èªè¨¼é–¢é€£ãƒ­ã‚¸ãƒƒã‚¯

## ğŸ› ï¸ MCP Tool ç™»éŒ²ãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// é–¢æ•°å½¢å¼ã§ãƒ„ãƒ¼ãƒ«ç™»éŒ²
export function registerAuthTools(server: McpServer, clickupClient: ClickUpClient, getAccessToken: () => string) {
  server.tool(
    "getUserInfo",
    "ClickUpã‹ã‚‰èªè¨¼ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼IDãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒ»ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒ»ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒURLãƒ»æ‰€å±ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹æƒ…å ±ã‚’å«ã‚€è©³ç´°æƒ…å ±ã‚’JSONå½¢å¼ã§è¡¨ç¤ºã€‚èªè¨¼ç¢ºèªãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ç¢ºèªãƒ»ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®šæ™‚ã«ä½¿ç”¨",
    {},
    responseSchema,
    async () => {
      try {
        const data = await clickupClient.getUserInfo(getAccessToken());
        return {
          content: [
            {
              text: JSON.stringify(data, null, 2),
              type: "text",
            },
          ],
        };
      } catch (error) {
        throw new Error(`ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ: ${error instanceof Error ? error.message : String(error)}`);
      }
    }
  );
}
```

## ğŸ” OAuthèªè¨¼ãƒ•ãƒ­ãƒ¼
```typescript
// MyMCPã‚¯ãƒ©ã‚¹å†…ã§this.propsã¨ã—ã¦åˆ©ç”¨å¯èƒ½
props: {
  accessToken,
  email,
  id,
  username,
} as UserProps

// èªè¨¼ã‚¹ã‚³ãƒ¼ãƒ—
// ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¹ã‚³ãƒ¼ãƒ—ã§ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã€ã‚¹ãƒšãƒ¼ã‚¹ã€ãƒ•ã‚©ãƒ«ãƒ€ã€ãƒªã‚¹ãƒˆã€ã‚¿ã‚¹ã‚¯ã¸ã®èª­ã¿æ›¸ãã‚¢ã‚¯ã‚»ã‚¹
// æ™‚é–“è¿½è·¡ã‚¨ãƒ³ãƒˆãƒªã®ä½œæˆã¨ç®¡ç†ç”¨ã®æ™‚é–“è¿½è·¡æ¨©é™ã‚’å«ã‚€
```

## ğŸ›¡ï¸ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// é©å¿œçš„ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹
function createAdaptiveErrorResponse(request: Request, error: string, statusCode: number) {
  if (isBrowserRequest(request)) {
    return createErrorPageResponse(error, statusCode);
  } else {
    return createErrorResponse(error, statusCode);
  }
}

// APIå‘¼ã³å‡ºã—ãƒ‘ã‚¿ãƒ¼ãƒ³
const response = await fetch(url, {
  method: 'GET',
  headers: {
    'Authorization': `Bearer ${accessToken}`,
    'Content-Type': 'application/json'
  }
});

if (!response.ok) {
  throw new Error(`APIå‘¼ã³å‡ºã—å¤±æ•—: ${response.status}`);
}
```

## ğŸ¯ çµ±åˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
`ClickUpClient` ãŒå…¨æ©Ÿèƒ½ã‚’çµ±åˆ
- **èªè¨¼é–¢é€£**: `getUserInfo()`, `getWorkspaces()`
- **ã‚¿ã‚¹ã‚¯åŸºæœ¬æ“ä½œ**: `getTask()`, `updateTask()`, `assignTask()`
- **æ¤œç´¢æ©Ÿèƒ½**: `getMyTasks()`, `searchTasks()`
- **å—ä¿¡ç®±æ©Ÿèƒ½**: `getInboxFutureTasks()`, `getInboxDoneTasks()`

## ğŸ”§ ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ

- `src/index.ts` - ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã€OAuthãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã¨MCPã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
- `src/handlers/combined-handler.ts` - å…¨ã¦ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’çµ±åˆã™ã‚‹ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯
- `src/handlers/oauth-handler.ts` - OAuthãƒ•ãƒ­ãƒ¼ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ï¼ˆ`/authorize`ã€`/callback`ã€`/webhook/clickup`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰
- `src/handlers/site-handler.ts` - ã‚µã‚¤ãƒˆã¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ï¼ˆ`/`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰
- `src/tools/index.ts` - å…¨ã¦ã®APIæ“ä½œã‚’å«ã‚€ClickUp APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ„ãƒ¼ãƒ«
- `src/api/common/error-handler.ts` - APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”¨ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£

## ğŸŒŠ ã‚³ã‚¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ•ãƒ­ãƒ¼

1. **OAuthèªè¨¼**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ClickUp OAuthçµŒç”±ã§èªè¨¼ã€ãƒˆãƒ¼ã‚¯ãƒ³ã¯KVã«ä¿å­˜
2. **MCPã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ**: èªè¨¼æ¸ˆã¿ã‚»ãƒƒã‚·ãƒ§ãƒ³ã¯ClickUp APIã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã‚’æŒã¤MCPã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œæˆ
3. **ãƒ„ãƒ¼ãƒ«ç™»éŒ²**: ClickUpæ“ä½œç”¨ã®çµ„ã¿è¾¼ã¿ãƒ„ãƒ¼ãƒ«ã‚’`init()`ãƒ¡ã‚½ãƒƒãƒ‰ã§ç™»éŒ²
4. **MCPã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `/sse`ã¯MCPé€šä¿¡ç”¨ã®æ°¸ç¶šçš„ãªæ¥ç¶šã‚’æä¾›
5. **Durable Objects**: Cloudflare Durable ObjectsçµŒç”±ã§ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ç®¡ç†

## ğŸ“‹ MCPãƒ„ãƒ¼ãƒ«ã‚«ãƒ†ã‚´ãƒª

- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ & ãƒãƒ¼ãƒ **: `getUserInfo`ã€`getWorkspaces`
- **ã‚¿ã‚¹ã‚¯ç®¡ç†**: `getTask`ã€`updateTask`ã€`assignTask`
- **ã‚¿ã‚¹ã‚¯ç™ºè¦‹**: `getMyTasks`ã€`searchTasks`  
- **å—ä¿¡ç®±æ©Ÿèƒ½**: `getInboxFutureTasks`ã€`getInboxDoneTasks`ã€`getInboxUnscheduledTasks`ã€`getInboxAll`
- **ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£**: `add`ï¼ˆãƒ†ã‚¹ãƒˆç”¨ã®åŸºæœ¬çš„ãªæ•°å­¦æ¼”ç®—ï¼‰

## âš™ï¸ ç’°å¢ƒè¨­å®š

### å¿…è¦ãªã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆï¼ˆwrangler.jsoncï¼‰
- `CLICKUP_CLIENT_ID` - ClickUp OAuthã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆID
- `CLICKUP_CLIENT_SECRET` - ClickUp OAuthã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ
- `COOKIE_ENCRYPTION_KEY` - Cookieç”¨ã®32æ–‡å­—ã®æš—å·åŒ–ã‚­ãƒ¼

### ç’°å¢ƒå¤‰æ•°
- `DEV_PORT` - é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãƒãƒ¼ãƒˆï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 8788ï¼‰

### KVãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹
- `OAUTH_KV` - OAuthãƒˆãƒ¼ã‚¯ãƒ³ã¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜

### Durable Objects
- `MyMCP` - ã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒ«ãªMCPã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å‡¦ç†

## ğŸš€ æ±ç”¨çš„ãªMCPã‚µãƒ¼ãƒãƒ¼é–‹ç™ºãƒ‘ã‚¿ãƒ¼ãƒ³

### åŸºæœ¬æ§‹é€ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
```typescript
// åŸºæœ¬çš„ãªMCPã‚µãƒ¼ãƒãƒ¼ã‚¯ãƒ©ã‚¹
export class MyMCP extends McpAgent<Env, Record<string, never>, UserProps> {
    server = new McpServer({
        name: "Your API MCP Server",
        version: "1.0.0",
        icon: "https://example.com/icon.ico",
    });

    async init() {
        // ä¾å­˜æ€§æ³¨å…¥ã®è¨­å®š
        const deps: ServiceDependencies = {
            env: this.env,
            config: createAppConfig(this.env),
        };
        
        // APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®åˆæœŸåŒ–
        const apiClient = new YourApiClient(deps);
        const getAccessToken = () => this.props.accessToken;

        // æ©Ÿèƒ½åˆ¥ãƒ„ãƒ¼ãƒ«ç™»éŒ²
        registerAuthTools(this.server, apiClient, getAccessToken);
        registerCoreTools(this.server, apiClient, getAccessToken);
        registerSearchTools(this.server, apiClient, getAccessToken);
    }
}
```

### ä¾å­˜æ€§æ³¨å…¥ãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// ä¾å­˜æ€§ã®å‹å®šç¾©
export interface ServiceDependencies {
    env: Env;
    config: AppConfig;
}

// çµ±åˆAPIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
export class YourApiClient {
    private auth: AuthService;
    private core: CoreService;
    private search: SearchService;
    private formatters: DataFormatters;

    constructor(private deps: ServiceDependencies) {
        this.auth = new AuthService(deps);
        this.core = new CoreService(deps);
        this.search = new SearchService(deps);
        this.formatters = new DataFormatters(deps);
    }

    // å…¬é–‹ãƒ¡ã‚½ãƒƒãƒ‰
    async getUser(accessToken: string) {
        return this.auth.getUser(accessToken);
    }

    async getData(accessToken: string, id: string) {
        const rawData = await this.core.getData(accessToken, id);
        return this.formatters.formatData(rawData);
    }
}
```

## âœ… ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### è¨­è¨ˆåŸå‰‡
- [ ] å˜ä¸€è²¬ä»»ã®åŸå‰‡ã«å¾“ã£ã¦ã„ã‚‹
- [ ] ä¾å­˜æ€§æ³¨å…¥ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹
- [ ] æ©Ÿèƒ½åˆ¥ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒåˆ†å‰²ã•ã‚Œã¦ã„ã‚‹
- [ ] çµ±åˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§æ©Ÿèƒ½ãŒé›†ç´„ã•ã‚Œã¦ã„ã‚‹

### MCPå®Ÿè£…
- [ ] McpAgentã‚’é©åˆ‡ã«æ‹¡å¼µã—ã¦ã„ã‚‹
- [ ] ãƒ„ãƒ¼ãƒ«ç™»éŒ²ãŒæ©Ÿèƒ½åˆ¥ã«åˆ†é›¢ã•ã‚Œã¦ã„ã‚‹
- [ ] é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- [ ] å‹å®‰å…¨æ€§ãŒç¢ºä¿ã•ã‚Œã¦ã„ã‚‹

### ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£
- [ ] OAuthèªè¨¼ãƒ•ãƒ­ãƒ¼ãŒé©åˆ‡ã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹
- [ ] Durable Objectsã§ã‚¹ãƒ†ãƒ¼ãƒˆç®¡ç†ã•ã‚Œã¦ã„ã‚‹
- [ ] KVã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãŒé©åˆ‡ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹
- [ ] ç’°å¢ƒè¨­å®šãŒåˆ†é›¢ã•ã‚Œã¦ã„ã‚‹

ã“ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚Šã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã§ä¿å®ˆå¯èƒ½ãªMCPã‚µãƒ¼ãƒãƒ¼ã‚’æ§‹ç¯‰ã—ã€åŠ¹ç‡çš„ãªClickUp APIçµ±åˆã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚