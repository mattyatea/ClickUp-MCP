---
description: ã‚³ãƒ¼ãƒ‰å“è³ªç®¡ç†ãƒ»ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ãƒ»ç¦æ­¢äº‹é …ãƒ»ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
globs: ["**/*"]
alwaysApply: true
---

# ã‚³ãƒ¼ãƒ‰å“è³ªç®¡ç†

## ğŸš« ç¦æ­¢äº‹é …

### çµ¶å¯¾ç¦æ­¢
- **`any`å‹ã®ä½¿ç”¨**: å…·ä½“çš„ãªå‹ã‚’å®šç¾©
- **æ©Ÿå¯†æƒ…å ±ã®ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰**: ç’°å¢ƒå¤‰æ•°ã‚„ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†ã‚’ä½¿ç”¨
- **`console.log`ã®æœ¬ç•ªæ®‹ç•™**: æœ¬ç•ªç’°å¢ƒã§ã¯é©åˆ‡ãªãƒ­ã‚°ãƒ¬ãƒ™ãƒ«è¨­å®š
- **æœªå‡¦ç†ã®Promise**: å¿…ãš`await`ã¾ãŸã¯é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- **`eval()`ã®ä½¿ç”¨**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã®ãŸã‚ç¦æ­¢

### å¼·ãéæ¨å¥¨
- **Promiseãƒã‚§ãƒ¼ãƒ³**: `async/await`ã‚’ä½¿ç”¨
- **æ·±ã„ãƒã‚¹ãƒˆ**: æ—©æœŸreturnã‚„ã‚¬ãƒ¼ãƒ‰å¥ã‚’ä½¿ç”¨
- **å·¨å¤§ãªé–¢æ•°**: å˜ä¸€è²¬ä»»ã®åŸå‰‡ã«å¾“ã£ã¦åˆ†å‰²
- **ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼**: åå‰ä»˜ãå®šæ•°ã‚’ä½¿ç”¨
- **ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°**: ä¾å­˜æ€§æ³¨å…¥ã‚„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨

## âœ… å“è³ªåŸºæº–

### å¿…é ˆãƒã‚§ãƒƒã‚¯é …ç›®
- [ ] å…¨ã¦ã®é–¢æ•°ã«å‹å®šç¾©ãŒã‚ã‚‹
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒé©åˆ‡ã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹
- [ ] éåŒæœŸå‡¦ç†ã§`async/await`ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹
- [ ] å‘½åè¦ç´„ã«å¾“ã£ã¦ã„ã‚‹
- [ ] å˜ä¸€è²¬ä»»ã®åŸå‰‡ã«å¾“ã£ã¦ã„ã‚‹
- [ ] é©åˆ‡ãªã‚³ãƒ¡ãƒ³ãƒˆãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹

### æ¨å¥¨ãƒã‚§ãƒƒã‚¯é …ç›®
- [ ] é–¢æ•°ã®è¤‡é›‘åº¦ãŒé©åˆ‡ï¼ˆ10è¡Œä»¥ä¸‹ã‚’ç›®å®‰ï¼‰
- [ ] DRYåŸå‰‡ã«å¾“ã£ã¦ã„ã‚‹ï¼ˆé‡è¤‡ã‚³ãƒ¼ãƒ‰ã®æ’é™¤ï¼‰
- [ ] SOLIDåŸå‰‡ã«å¾“ã£ã¦ã„ã‚‹
- [ ] é©åˆ‡ãªæŠ½è±¡åŒ–ãƒ¬ãƒ™ãƒ«ã‚’ä¿ã£ã¦ã„ã‚‹
- [ ] å‹ã‚¬ãƒ¼ãƒ‰ã‚’é©åˆ‡ã«ä½¿ç”¨ã—ã¦ã„ã‚‹

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ãƒ†ã‚¹ãƒˆéšå±¤
```
å˜ä½“ãƒ†ã‚¹ãƒˆ (Unit Tests)
â”œâ”€â”€ é–¢æ•°ãƒ»ãƒ¡ã‚½ãƒƒãƒ‰ã®å‹•ä½œç¢ºèª
â”œâ”€â”€ å‹å®‰å…¨æ€§ã®ç¢ºèª
â””â”€â”€ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ç¢ºèª

çµ±åˆãƒ†ã‚¹ãƒˆ (Integration Tests)
â”œâ”€â”€ APIå‘¼ã³å‡ºã—ã®ç¢ºèª
â”œâ”€â”€ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã®ç¢ºèª
â””â”€â”€ å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹é€£æºã®ç¢ºèª

E2Eãƒ†ã‚¹ãƒˆ (End-to-End Tests)
â”œâ”€â”€ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼ã®ç¢ºèª
â”œâ”€â”€ OAuthèªè¨¼ãƒ•ãƒ­ãƒ¼ã®ç¢ºèª
â””â”€â”€ å…¨ä½“çš„ãªå‹•ä½œç¢ºèª
```

### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦ç´„
```
src/
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ formatters.ts
â”‚   â””â”€â”€ formatters.test.ts
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ basic.ts
â”‚   â””â”€â”€ basic.test.ts
â””â”€â”€ __tests__/
    â”œâ”€â”€ integration/
    â””â”€â”€ e2e/
```

### ãƒ†ã‚¹ãƒˆã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
```typescript
// âœ… è‰¯ã„ãƒ†ã‚¹ãƒˆ
describe('formatTimestamp', () => {
  it('æœ‰åŠ¹ãªã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’æ­£ã—ã„å½¢å¼ã«å¤‰æ›ã™ã‚‹', () => {
    const result = formatTimestamp(1640995200000);
    expect(result).toBe('2022/01/01 00:00:00');
  });

  it('ç„¡åŠ¹ãªå…¥åŠ›ã«å¯¾ã—ã¦nullã‚’è¿”ã™', () => {
    expect(formatTimestamp(null)).toBeNull();
    expect(formatTimestamp('')).toBeNull();
    expect(formatTimestamp('invalid')).toBeNull();
  });
});

// âŒ æ‚ªã„ãƒ†ã‚¹ãƒˆ
describe('test', () => {
  it('works', () => {
    expect(someFunction()).toBeTruthy();
  });
});
```

## ğŸ“Š ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ»ç›£è¦–

### ã‚³ãƒ¼ãƒ‰å“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹
- **å‹ã‚«ãƒãƒ¬ãƒƒã‚¸**: 95%ä»¥ä¸Š
- **é–¢æ•°ã‚ãŸã‚Šã®è¡Œæ•°**: 20è¡Œä»¥ä¸‹ã‚’ç›®å®‰
- **è¤‡é›‘åº¦**: é–¢æ•°ã‚ãŸã‚Š10ä»¥ä¸‹
- **é‡è¤‡ã‚³ãƒ¼ãƒ‰**: 5%ä»¥ä¸‹
- **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸**: 80%ä»¥ä¸Š

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
```typescript
// ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®šã®ä¾‹
async function measurePerformance<T>(
  operation: () => Promise<T>,
  operationName: string
): Promise<T> {
  const start = performance.now();
  try {
    const result = await operation();
    const duration = performance.now() - start;
    
    // 5ç§’ã‚’è¶…ãˆã‚‹å ´åˆã¯è­¦å‘Š
    if (duration > 5000) {
      console.warn(`${operationName} took ${duration}ms`);
    }
    
    return result;
  } catch (error) {
    const duration = performance.now() - start;
    console.error(`${operationName} failed after ${duration}ms:`, error);
    throw error;
  }
}
```

## ğŸ”§ é™çš„è§£æãƒ„ãƒ¼ãƒ«

### æ¨å¥¨ãƒ„ãƒ¼ãƒ«
```json
{
  "scripts": {
    "type-check": "tsc --noEmit",
    "lint": "eslint src/**/*.ts",
    "format": "prettier --write .",
    "format-check": "prettier --check .",
    "audit": "npm audit --audit-level=moderate"
  }
}
```

### ESLintè¨­å®šä¾‹
```javascript
// .eslintrc.js
module.exports = {
  extends: [
    '@typescript-eslint/recommended',
    'prettier'
  ],
  rules: {
    '@typescript-eslint/no-explicit-any': 'error',
    '@typescript-eslint/no-unused-vars': 'error',
    'prefer-const': 'error',
    'no-console': 'warn'
  }
};
```

## ğŸš¨ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å“è³ª

### çµ±ä¸€ã•ã‚ŒãŸã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// åŸºæœ¬ã‚¨ãƒ©ãƒ¼ã‚¯ãƒ©ã‚¹
class AppError extends Error {
  constructor(
    message: string,
    public code: string,
    public statusCode: number = 500
  ) {
    super(message);
    this.name = 'AppError';
  }
}

// API ã‚¨ãƒ©ãƒ¼
class ApiError extends AppError {
  constructor(message: string, statusCode: number, code?: string) {
    super(message, code || 'API_ERROR', statusCode);
  }
}

// ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼
class ValidationError extends AppError {
  constructor(message: string, field?: string) {
    super(message, 'VALIDATION_ERROR', 400);
    if (field) {
      this.message = `${field}: ${message}`;
    }
  }
}
```

### ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°å½¢å¼
```typescript
// æ§‹é€ åŒ–ãƒ­ã‚°
function logError(error: Error, context?: Record<string, unknown>) {
  const logData = {
    timestamp: new Date().toISOString(),
    level: 'error',
    message: error.message,
    stack: error.stack,
    context: context || {}
  };
  
  console.error(JSON.stringify(logData));
}
```

## ğŸ“‹ ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### æ©Ÿèƒ½æ€§
- [ ] è¦ä»¶ã‚’æº€ãŸã—ã¦ã„ã‚‹
- [ ] ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã‚’è€ƒæ…®ã—ã¦ã„ã‚‹
- [ ] é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®å•é¡ŒãŒãªã„

### ä¿å®ˆæ€§
- [ ] ã‚³ãƒ¼ãƒ‰ãŒç†è§£ã—ã‚„ã™ã„
- [ ] é©åˆ‡ãªå‘½åè¦ç´„
- [ ] é©åˆ‡ãªã‚³ãƒ¡ãƒ³ãƒˆ
- [ ] å°†æ¥ã®æ‹¡å¼µæ€§ã‚’è€ƒæ…®

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- [ ] å…¥åŠ›å€¤æ¤œè¨¼ãŒé©åˆ‡
- [ ] æ©Ÿå¯†æƒ…å ±ã®æ¼æ´©ãŒãªã„
- [ ] é©åˆ‡ãªæ¨©é™ãƒã‚§ãƒƒã‚¯
- [ ] SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–

### ãƒ†ã‚¹ãƒˆ
- [ ] ãƒ†ã‚¹ãƒˆãŒé©åˆ‡ã«æ›¸ã‹ã‚Œã¦ã„ã‚‹
- [ ] ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãŒååˆ†
- [ ] å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆãŒå«ã¾ã‚Œã¦ã„ã‚‹
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆãŒé©åˆ‡

## ğŸ¯ å“è³ªå‘ä¸Šã®ãŸã‚ã®ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### ç¶™ç¶šçš„æ”¹å–„
```typescript
// TODO: æŠ€è¡“çš„è² å‚µã®ç®¡ç†
// FIXME: æ—¢çŸ¥ã®å•é¡Œã®ä¿®æ­£
// HACK: ä¸€æ™‚çš„ãªè§£æ±ºç­–ï¼ˆå¾Œã§ä¿®æ­£äºˆå®šï¼‰
// NOTE: é‡è¦ãªæ³¨æ„äº‹é …
```

### ä¾å­˜é–¢ä¿‚ç®¡ç†
```bash
# è„†å¼±æ€§ãƒã‚§ãƒƒã‚¯
npm audit

# ä¾å­˜é–¢ä¿‚ã®æ›´æ–°
npm update

# æœªä½¿ç”¨ä¾å­˜é–¢ä¿‚ã®ç¢ºèª
npx depcheck
```

### æ–‡æ›¸åŒ–
```typescript
/**
 * ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ã™ã‚‹
 * @param id - ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
 * @param includeProfile - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±ã‚’å«ã‚ã‚‹ã‹
 * @returns ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±
 * @throws {ValidationError} ç„¡åŠ¹ãªIDã®å ´åˆ
 * @throws {ApiError} APIå‘¼ã³å‡ºã—ãŒå¤±æ•—ã—ãŸå ´åˆ
 */
async function getUser(
  id: string, 
  includeProfile: boolean = false
): Promise<User> {
  // å®Ÿè£…
}
```

## ğŸ” å®šæœŸçš„ãªå“è³ªãƒã‚§ãƒƒã‚¯

### é€±æ¬¡ãƒã‚§ãƒƒã‚¯
- [ ] å‹ãƒã‚§ãƒƒã‚¯ã®å®Ÿè¡Œ
- [ ] ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯
- [ ] æœªä½¿ç”¨ä¾å­˜é–¢ä¿‚ã®ç¢ºèª
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»

### æœˆæ¬¡ãƒã‚§ãƒƒã‚¯
- [ ] ä¾å­˜é–¢ä¿‚ã®æ›´æ–°
- [ ] ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®ç¢ºèª
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š
- [ ] æŠ€è¡“çš„è² å‚µã®æ£šå¸ã—

### ãƒªãƒªãƒ¼ã‚¹å‰ãƒã‚§ãƒƒã‚¯
- [ ] å…¨è‡ªå‹•ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
- [ ] æ‰‹å‹•ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¤œè¨¼
- [ ] æ–‡æ›¸ã®æ›´æ–°
description:
globs:
alwaysApply: false
---
